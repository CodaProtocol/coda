(jbuild_version 1)

(library
 ((name nanobit_base)
  (public_name nanobit_base)
  (modules (:standard \ test_runner))
  (library_flags (-linkall))
  (libraries (core camlsnark async async_extra ppx_inline_test.runtime-lib))
  (preprocess (pps (ppx_jane ppx_driver.runner (-inline-test-lib nanobit_base))))
  (synopsis "Snarks and friends necessary for keypair generation")))

(executable
 ((name test_runner)
  (modules (test_runner))
  (libraries (nanobit_base ppx_inline_test.runner.lib))))

(alias
 ((name runtest)
  (deps (test_runner.exe))
  (action (run ${<} inline-test-runner nanobit_base))))

