# Bugs

- snark_pool_refcount find_exn on garbage
  - FIX: pass full diffs to extensions, update full representation to include garbage
  - https://circleci.com/gh/CodaProtocol/coda/227853?utm_campaign=vcs-integration-link&utm_medium=referral&utm_source=github-build-link
+ busy diff buffer worker
- frontier hash mismatch
- crash on startup with old config
  - valid database
  - corrupted database

# Features

+ reimplement ledger catchup sync status (#3006)
+ implement persistent transition frontier loading
* implement short term fast forward hack
  - push transition frontier ownership down into transition router
  - bootstrap recovery
  - failure recovery (clean and retry once)
+ implement persistent frontier database reset
+ implement persistent frontier database destruction
- audit persistent root state management (updates, resets)
+ audit persistent frontier sync vs instance resource management
- diff buffer flush on interval

# Regressions

- add unit tests back in
- fix visualization logging on crashes
- create O(1) `Staged_ledger.Scan_state.target_merkle_root` (for sync_handler RPCs)

# Refactors

+ defunctor transition frontier
- defunctor transition frontier components
- create reusable pattern for singleton factories
- singleton factory instance reuse after destruction prevention
- persistent frontier worker open anonymous variants
- remove identity pipe and extension
+ better encapsulate transition frontier sub libraries using top level interfaces
+ improved error handling in persistent frontier instance entrypoints
+ extensions refactor (multiple files)
+ invert broadcastable extensions functor (include functor in definition, don't pass definition to functor)
- convert persistent frontier sync into an extension?

# External

- transition frontier graceful shutdown
- improved persistent frontier database batched requests
+ extensions full diffs
- dynamic extensions? (probably just open an issue for this)
